{"version":3,"file":"commonHelpers2.js","sources":["../src/js/js-hw-12.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport axios from 'axios';\n\nconst searchForm = document.getElementById('search-form');\nconst searchInput = document.getElementById('search-input');\nconst gallery = document.getElementById('gallery');\nconst loadMoreButton = document.getElementById('load-more');\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '41471340-7b105b7a368edb6edd340273b';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nconst loader = document.querySelector('.loader');\n\nfunction showLoadingIndicator() {\n  loader.style.display = 'block';\n}\n\nfunction hideLoadingIndicator() {\n  loader.style.display = 'none';\n}\n\nsearchForm.addEventListener('submit', async (event) => {\n  event.preventDefault();\n\n  const query = searchInput.value;\n\n  if (query.trim() === '') {\n    iziToast.error({\n      title: 'Error',\n      message: 'Sorry, there are no images matching your search',\n    });\n\n    return hideLoadingIndicator();\n  }\n\n  showLoadingIndicator();\n  let page = 1;\n\n  try {\n    const response = await axios.get(`${BASE_URL}?key=${API_KEY}&q=${query}&per_page=40`);\n    const { data: { hits } } = response;\n\n    gallery.innerHTML = '';\n    page += 1;\n\n    const markup = hits.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n      <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\" >\n          <img class=\"gallery-image\" src=\"${webformatURL}\" data-source=\"${largeImageURL}\" alt=\"${tags}\" />\n        </a>\n        <div class=\"card-info\">\n        <div class=\"field\">\n            <span class=\"label\">Likes</span>\n            <span class=\"value\">${likes}</span>    \n        </div>\n        \n        <div class=\"field\">\n            <span class=\"label\">Views</span>\n            <span class=\"value\">${views}</span>   \n        </div>\n        <div class=\"field\">\n            <span class=\"label\">Comments</span>\n            <span class=\"value\">${comments}</span>    \n        </div>\n        <div class=\"field\">\n            <span class=\"label\">Downloads</span>\n            <span class=\"value\">${downloads}</span>    \n        </div>\n        </div>\n      </li>\n          `).join('');\n\n    gallery.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Sorry, there are no images matching your search',\n    });\n  } finally {\n    hideLoadingIndicator();\n    event.target.reset();\n  }\n  });\n\nlightbox.refresh();\nlet images = [];\nlet currentPage = 1;\n\nsearchForm.addEventListener('submit', function (event) {\n  event.preventDefault();\n  images = [];\n  currentPage = 1;\n  const query = document.getElementById('search-input').value;\n  performSearch(query, currentPage);\n});\n\nloadMoreButton.addEventListener('click', function () {\n  currentPage++;\n  const query = document.getElementById('search-input').value;\n  performSearch(query, currentPage);\n});\n\nfunction performSearch(query, page) {\n\n\n\n  setTimeout(function () {\n    addImagesToGallery([...Array(8)].map((_, i) => i + page * 10));\n  }, 1000);\n}\n\nfunction addImagesToGallery(imageIds) {\n\n  if (imageIds.length > 0) {\n    document.getElementById('load-more').style.display = 'flex';\n  } else {\n    document.getElementById('load-more').style.display = 'none';\n  }\n\n  imageIds.forEach(function (imageId) {\n    const imageElement = document.createElement('img');\n    imageElement.src = 'https://pixabay.com/api/' + API_KEY + '.jpg';\n    gallery.appendChild(imageElement);\n  });\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"],"names":["searchForm","searchInput","gallery","loadMoreButton","BASE_URL","API_KEY","lightbox","SimpleLightbox","loader","showLoadingIndicator","hideLoadingIndicator","event","query","iziToast","page","response","axios","hits","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","currentPage","performSearch","addImagesToGallery","_","i","imageIds","imageId","imageElement"],"mappings":"wJAQA,MAAMA,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAc,SAAS,eAAe,cAAc,EACpDC,EAAU,SAAS,eAAe,SAAS,EAC3CC,EAAiB,SAAS,eAAe,WAAW,EAEpDC,EAAW,2BACXC,EAAU,qCAEVC,EAAW,IAAIC,EAAe,aAAc,CAChD,SAAU,GACV,aAAc,MACd,aAAc,GAChB,CAAC,EACKC,EAAS,SAAS,cAAc,SAAS,EAE/C,SAASC,GAAuB,CAC9BD,EAAO,MAAM,QAAU,OACzB,CAEA,SAASE,GAAuB,CAC9BF,EAAO,MAAM,QAAU,MACzB,CAEAR,EAAW,iBAAiB,SAAU,MAAOW,GAAU,CACrDA,EAAM,eAAc,EAEpB,MAAMC,EAAQX,EAAY,MAE1B,GAAIW,EAAM,KAAM,IAAK,GACnB,OAAAC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,iDACf,CAAK,EAEMH,EAAoB,EAG7BD,IACA,IAAIK,EAAO,EAEX,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAM,IAAI,GAAGZ,SAAgBC,OAAaO,eAAmB,EAC9E,CAAE,KAAM,CAAE,KAAAK,CAAM,CAAA,EAAKF,EAE3Bb,EAAQ,UAAY,GACpBY,GAAQ,EAER,MAAMI,EAASD,EAAK,IAAI,CAAC,CAAE,aAAAE,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAAK;AAAA;AAAA,wCAElEL;AAAA,4CACID,mBAA8BC,WAAuBC;AAAA;AAAA;AAAA;AAAA;AAAA,kCAK/DC;AAAA;AAAA;AAAA;AAAA;AAAA,kCAKAC;AAAA;AAAA;AAAA;AAAA,kCAIAC;AAAA;AAAA;AAAA;AAAA,kCAIAC;AAAA;AAAA;AAAA;AAAA,WAIvB,EAAE,KAAK,EAAE,EAEhBvB,EAAQ,mBAAmB,YAAagB,CAAM,EAC9CZ,EAAS,QAAO,CACjB,MAAC,CACAO,EAAS,MAAM,CACb,MAAO,QACP,QAAS,iDACf,CAAK,CACL,QAAY,CACRH,IACAC,EAAM,OAAO,OACd,CACH,CAAG,EAEHL,EAAS,QAAO,EAEhB,IAAIoB,EAAc,EAElB1B,EAAW,iBAAiB,SAAU,SAAUW,EAAO,CACrDA,EAAM,eAAc,EAEpBe,EAAc,EACd,MAAMd,EAAQ,SAAS,eAAe,cAAc,EAAE,MACtDe,EAAcf,EAAOc,CAAW,CAClC,CAAC,EAEDvB,EAAe,iBAAiB,QAAS,UAAY,CACnDuB,IACA,MAAMd,EAAQ,SAAS,eAAe,cAAc,EAAE,MACtDe,EAAcf,EAAOc,CAAW,CAClC,CAAC,EAED,SAASC,EAAcf,EAAOE,EAAM,CAIlC,WAAW,UAAY,CACrBc,EAAmB,CAAC,GAAG,MAAM,CAAC,CAAC,EAAE,IAAI,CAACC,EAAGC,IAAMA,EAAIhB,EAAO,EAAE,CAAC,CAC9D,EAAE,GAAI,CACT,CAEA,SAASc,EAAmBG,EAAU,CAEhCA,EAAS,OAAS,EACpB,SAAS,eAAe,WAAW,EAAE,MAAM,QAAU,OAErD,SAAS,eAAe,WAAW,EAAE,MAAM,QAAU,OAGvDA,EAAS,QAAQ,SAAUC,EAAS,CAClC,MAAMC,EAAe,SAAS,cAAc,KAAK,EACjDA,EAAa,IAAM,2BAA6B5B,EAAU,OAC1DH,EAAQ,YAAY+B,CAAY,CACpC,CAAG,CACH"}